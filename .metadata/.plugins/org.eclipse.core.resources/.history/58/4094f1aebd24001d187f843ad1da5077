&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("Руководитель") Тогда
			Объект.Руководитель = Параметры.Руководитель;
			
			Если Не Параметры.Руководитель = Параметры.Руководитель.Подразделение.Руководитель Тогда
				НачПодр = Объект.СписокДляСогласования.Добавить();
				Начподр.Сотрудник = Параметры.Руководитель.Подразделение.Руководитель;
			КонецЕсли;
	КонецЕсли;
	
	
	
	
	
	Если Объект.Исполнители.Количество() > 1 И Объект.ПроектСогласован Тогда
		НесколькоИсполнителей = Истина;	
	КонецЕсли;
	
	Попытка
		Исполнитель = Объект.Исполнители[0].Сотрудник; 
	Исключение
		
	КОнецПопытки;
	
	УправлениеВидимостью();
КонецПроцедуры









&НаСервере
Процедура УправлениеВидимостью()
	
	
		Элементы.Исполнитель.Видимость = Объект.ПроектСогласован И НЕ НесколькоИсполнителей;
		Элементы.Руководитель.ОтметкаНезаполненного = Объект.ПроектСогласован;
		Элементы.НесколькоИсполнителей.Видимость = Объект.ПроектСогласован;
		Элементы.Исполнитель.ОтметкаНезаполненного = Объект.ПроектСогласован;
		Элементы.ГруппаИсполнители.видимость = Объект.ПроектСогласован И НесколькоИсполнителей;
		
КонецПроцедуры



&НаСервере
Процедура ОбработкаПроверкиЗаполненияНаСервере(Отказ, ПроверяемыеРеквизиты)
	Если Объект.ПроектСогласован И НЕ НесколькоИсполнителей Тогда
			Проверяемыереквизиты.Добавить("Исполнитель");
	КонецЕсли;
КонецПроцедуры



//ПОДПИСКА НА ИЗМЕНЕНИЕ
&НаКлиенте
Процедура ИсполнительПриИзменении(Элемент)
	Если Объект.Исполнители.Количество() > 0 Тогда
		Объект.Исполнители[0].Сотрудник = Исполнитель;
	Иначе
		Стр = Объект.Исполнители.Добавить();
		Стр.Сотрудник = Исполнитель;
	КонецЕсли;
	ИсполнительПриИзмененииНаСервере();
КонецПроцедуры

&НаСервере
Процедура ИсполнительПриИзмененииНаСервере()
	//TODO: Вставить содержимое обработчика
КонецПроцедуры

&НаКлиенте
Процедура НесколькоИсполнителейПриИзменении(Элемент)
	НесколькоИсполнителейПриИзмененииНаСервере();
КонецПроцедуры

&НаСервере
Процедура НесколькоИсполнителейПриИзмененииНаСервере()
	УправлениеВидимостью();
КонецПроцедуры

&НаКлиенте
Процедура ПроектСогласованПриИзменении(Элемент)
	ПроектСогласованПриИзмененииНаСервере();
КонецПроцедуры

&НаСервере
Процедура ПроектСогласованПриИзмененииНаСервере()
	УправлениеВидимостью();
КонецПроцедуры

